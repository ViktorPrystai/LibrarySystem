{% extends 'base.html' %}

{% block title %}My Orders - Library Management System{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-8">
            <h2>My Orders</h2>

            <ul class="list-group">
                {% for order in orders %}
                    <li class="list-group-item">
{#                        <strong>Order ID:</strong> {{ order.id }} <br>#}
                        <strong>Book ID:</strong> {{ order.book.id }} <br>
                        <strong>Book Title:</strong> {{ order.book.name }} <br>
                        <strong>Created At:</strong> {{ order.created_at }} <br>
                        {% if order.end_at %}
                            <strong>Returned At:</strong> {{ order.end_at }} <br>
                        {% endif %}
                        <strong>Planned Return At:</strong> {{ order.plated_end_at }} <br>
                        <strong>Status:</strong> {{ order.get_status_display }} <br>

                        {% if order.status == 'open' %}
                            <a href="{% url 'request_close_order' order.id %}" class="btn btn-warning">Request to Close</a>
                        {% elif order.status == 'pending' %}
                            <span class="text-warning">Awaiting librarian's approval</span>
                        {% elif order.status == 'closed' %}
                            <span class="text-muted">Order closed</span>
                        {% endif %}
                    </li>
                {% empty %}
                    <li class="list-group-item">No orders found.</li>
                {% endfor %}
            </ul>

            <a href="{% url 'create_order' %}" class="btn btn-primary mt-3">Create New Order</a>
        </div>
    </div>
{% endblock %}

